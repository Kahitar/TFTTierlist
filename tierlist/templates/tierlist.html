<div class="container">
    <!-- <nav class="navbar navbar-expand-md"> -->
        {% if current_user.is_authenticated and current_user == tierlist.author %}
            <div class="float-left mt-2 mb-2 mr-2">
                <a class="btn btn-sm btn-outline-info" href="{{ url_for('comps.new_comp', tierlist_id=tierlist.id) }}">Add Comp</a>
            </div>
            <div class="float-left mt-2 mb-2 mr-2">
                <a class="btn btn-sm btn-outline-info" href="{{ url_for('tierlists.tierlist_properties', tierlist_id=tierlist.id) }}">Options</a>
            </div>
            <div class="float-left mt-2 mb-2 mr-2">
                <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteTierlistModal">Delete Tierlist</button>
            </div>
        {% endif %}
        <div class="float-right mt-2 mr-2">
            <div class="nav-item">Last update: {{ tierlist.last_updated.strftime('%d.%m.%Y') }}</div>
        </div>
    <!-- </div> -->
    <table class="table table-hover table-sm">
    <tbody>
        <tr class="table-active">
            <th style="width: 50px">RANKING</th>
            <th>CARRIES</th>
            <th>SYNERGIES</th>
            <th>CHOSEN</th>
            <th>ITEMS & POSITIONING</th>
            {% if current_user.is_authenticated and current_user == tierlist.author %}
                <th class="text-center" colspan="2">Tier Up/Down</th>
                <th class="text-center" colspan="2">Row Up/Down</th>
                <th>Comp</th>
            {% endif %}
        </tr>
    	{% for comp in comps %}
            <tr>
                <td class="tier-{{ comp.tier }}">Tier {{ comp.tier }}</td>
                <td class="ml-2">{{ comp.carries }}</td>
                <td class="ml-2">{{ comp.synergies }}</td>
                <td class="ml-2">{{ comp.chosen }}</td>
                <td class="ml-2"><a href="{{ comp.lolchess }}" target="_blank">lolchess.gg</a></td>

                {% if current_user.is_authenticated and current_user.is_admin %}
                    <td>
                        {% if comp.tier > 1 or comp.sub_tier > 1 %}
                            <a class="btn btn-info btn-sm float-right" href="{{ url_for('comps.move_comp', comp_id=comp.id, direction='tier-up') }}">
                                <img src="{{ url_for('static', filename='arrow-up-tier.ico') }}" alt="Tier up" class="">
                            </a>
                        {% endif %}
                    </td>
                    <td>
                        <a class="btn btn-info btn-sm" href="{{ url_for('comps.move_comp', comp_id=comp.id, direction='tier-down') }}">
                            <img src="{{ url_for('static', filename='arrow-down-tier.ico') }}" alt="Tier down" class="">
                        </a>
                    </td>
                    <td>
                        {% if comp.tier > 1 or comp.sub_tier > 1 %}
                            <a class="btn btn-info btn-sm float-right" href="{{ url_for('comps.move_comp', comp_id=comp.id, direction='up') }}">
                                <img src="{{ url_for('static', filename='arrow-up-sub-tier.ico') }}" alt="Sub Tier up" class="">
                            </a>
                        {% endif %}
                    </td>
                    <td>
                        {% if comp != comps[-1] %}
                            <a class="btn btn-info btn-sm" href="{{ url_for('comps.move_comp', comp_id=comp.id, direction='down') }}">
                                <img src="{{ url_for('static', filename='arrow-down-sub-tier.ico') }}" alt="Sub Tier down" class="">
                            </a>
                        {% endif %}
                    </td>
                    <td style="width: 130px">
                        <a class="btn btn-info btn-sm" href="{{ url_for('comps.update_comp', comp_id=comp.id) }}">Edit</a>
                        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteCompModal{{ comp.id }}">Delete</button>
                    </td>
                {% endif %}
            </tr>

            <!-- Modal to delete comp (from https://getbootstrap.com/docs/4.3/components/modal/#live-demo) -->
            <div class="modal fade" id="deleteCompModal{{ comp.id }}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Delete Comp? (Carries: {{ comp.carries }})</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <form action="{{ url_for('comps.delete_comp', comp_id=comp.id) }}" method="POST">
                        <input class="btn btn-danger" type="submit" value="Delete">
                    </form>
                  </div>
                </div>
              </div>
            </div>
    	{% endfor %}
    </tbody>
    </table>

    <!-- Modal to delete tierlist -->
    <div class="modal fade" id="deleteTierlistModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModalLabel">Delete Tierlist?</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <form action="{{ url_for('tierlists.delete_tierlist', tierlist_id=tierlist.id) }}" method="POST">
                <input class="btn btn-danger" type="submit" value="Delete">
            </form>
          </div>
        </div>
      </div>
    </div>
</div>
